#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int authenticate(char* password) {
  char buf[9]; // 8 character password
  char tmp[9]; // same as above
  FILE *fp;

  strcpy(buf, password);

  fp = fopen("password.txt" , "r");

  fscanf(fp, "%s\n", tmp);
  fclose(fp);

  return strcmp(buf, tmp);
}


int main(int argc, char *argv[]) {
  char tmp[32];
  FILE *fp;

  if(argc != 2) {
    printf("Usage: %s password (password must be 8 characters or less\n", argv[0]);
  } else if(authenticate(argv[1]) == 0) {
    printf("Success!\n");
    system("/bin/sh");
  } else {
    printf("Access Denied!\n");
  }
  exit(0);
}

